<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="/plantilla/plantilla.xhtml">


	<ui:define name="metadata">
	</ui:define>
	<ui:define name="content">


		<h2>CONSULTAR REPRESENTANTES</h2>


		<h:form id="formConsultaRepresentante">
			<p:panel style="margin: 15px; padding:20px;">
				<h:panelGrid style="width:100%;text-align:center;">
					<p:panelGrid columns="2" style="margin:0 auto 10px;">
						<h:outputText value="Periodo desde: *" />
						<h:panelGroup>
							<p:calendar locale="es" id="maskFI" readonlyInput="true"
								requiredMessage="Seleccione una fecha inicial" required="true"
								navigator="true"
								value="#{consultarRepresentanteController.consultarRepresentanteModel.fechaInicio}"
								pattern="dd/MM/yy" mask="true">
								<p:ajax event="dateSelect"
									update=":formConsultaRepresentante:maskFI" />
							</p:calendar>
							<h:outputText value="hasta" style="margin:10px;" />
							<p:calendar locale="es" id="maskFF" readonlyInput="true"
								requiredMessage="Seleccione una fecha final" required="true"
								value="#{consultarRepresentanteController.consultarRepresentanteModel.fechaFin}"
								navigator="true" pattern="dd/MM/yy" mask="true">
								<p:ajax event="dateSelect"
									update=":formConsultaRepresentante:maskFF" />
							</p:calendar>
						</h:panelGroup>

						<h:outputText for="txtnumeroruc" value="N&uacute;mero de Ruc: " />

						<p:inputText id="txtnumeroruc" styleClass="input-medio"
							maxlength="11"
							value="#{consultarRepresentanteController.consultarRepresentanteModel.ruc}"
							onkeypress="javascript:return jsValidarKey(event,/[0-9]/);"
							required="true" requiredMessage="Ingrese un n&uacute;mero de ruc"
							validatorMessage="Ruc invalido, cantidad de d&iacute;gitos debe ser 11">
							<f:validateLength minimum="11" />
						</p:inputText>
					</p:panelGrid>

					<p:commandButton id="agregCas" value="Buscar"
						styleClass="btnGrande" onstart="PF('statusDialog').show()"
						oncomplete="PF('statusDialog').hide()"
						actionListener="#{consultarRepresentanteController.buscarRepresentantes()}"
						update=":formConsultaRepresentante" />

					<p:messages autoUpdate="true" id="msgs" showDetail="true"
						showSummary="false" closable="true" />

					<div class="dashed"></div>

					<p:panelGrid id="pgExporter" columns="2"
						style="float:right;margin-right:2px;">
						<h:commandLink
							rendered="#{consultarRepresentanteController.consultarRepresentanteModel.busquedaRealizada}">
							<img
								src="#{request.contextPath}/resources/img/plantillaBN/iconos/xls.gif" />
							<p:dataExporter type="xls" target="tablaRepresentante"
								fileName="representantes" />
						</h:commandLink>
					</p:panelGrid>
					<p:dataTable id="tablaRepresentante" paginator="true"
						paginatorPosition="bottom" rows="5"
						rendered="#{consultarRepresentanteController.consultarRepresentanteModel.busquedaRealizada}"
						paginatorTemplate="{FirstPageLink} {PreviousPageLink} {CurrentPageReport}
									 {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
						currentPageReportTemplate="{currentPage} de {totalPages}"
						rowsPerPageTemplate="5,10,15"
						value="#{consultarRepresentanteController.consultarRepresentanteModel.listaRepresentantes}"
						var="representante"
						emptyMessage="No hay representantes en la Unidad Ejecutora/empresa">


						<p:column style="text-align:center;">
							<f:facet name="header">
								<h:outputText value="Fecha de registro" />
							</f:facet>
							<h:outputText value="#{representante.fechaRegistro}">
								<f:convertDateTime type="date" pattern="dd/MM/yyyy hh:mm:ss a" />
							</h:outputText>

						</p:column>

						<p:column style="text-align:center;">
							<f:facet name="header">
								<h:outputText value="Tipo de documento" />
							</f:facet>
							<h:outputText
								value="#{consultarRepresentanteController.consultarRepresentanteModel.tipoDocumentoLetras(representante.tipoDocumento)}" />
						</p:column>

						<p:column style="text-align:center;">
							<f:facet name="header">
								<h:outputText value="Número de documento" />
							</f:facet>
							<h:outputText value="#{representante.numeroDocumento}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Nombres" />
							</f:facet>
							<h:outputText value="#{representante.nombreCompleto()}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Correo" />
							</f:facet>
							<h:outputText value="#{representante.correoLaboral}" />
						</p:column>

						<p:column style="text-align:center;">
							<f:facet name="header">
								<h:outputText value="Teléfono fijo" />
							</f:facet>
							<h:outputText value="#{representante.telefonoFijo}" />
						</p:column>

						<p:column style="text-align:center;">
							<f:facet name="header">
								<h:outputText value="Teléfono móvil" />
							</f:facet>
							<h:outputText value="#{representante.telefonoMovil}">
							</h:outputText>
						</p:column>

						<p:column style="text-align:center;">
							<f:facet name="header">
								<h:outputText value="Estado" />
							</f:facet>
							<h:outputText value="#{representante.estado}" />
						</p:column>
					</p:dataTable>

				</h:panelGrid>
			</p:panel>
		</h:form>
	</ui:define>
</ui:composition>